# Brawl Stars Code Generator Bot

## Overview

Telegram –±–æ—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –∫–æ–º–∞–Ω–¥ Brawl Stars —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —Å–º–µ—â–µ–Ω–∏–µ–º. –ë–æ—Ç —Ç—Ä–µ–±—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–Ω–∞–ª –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## Recent Changes

- 2024-12-18: –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏
  - ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è "–í—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø" - —Ç–µ–ø–µ—Ä—å **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞**
  - ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –±–æ—Ç–∞ –Ω–∞ Railway (Webhook —Ä–µ–∂–∏–º)
  - ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (welcome.png)
- –£–ª—É—á—à–µ–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ /start —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤ (—Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)

## Project Architecture

### –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ bot.py                      # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª Telegram –±–æ—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt            # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Procfile                    # –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è Railway
‚îú‚îÄ‚îÄ runtime.txt                 # –í–µ—Ä—Å–∏—è Python (3.11.13)
‚îú‚îÄ‚îÄ railway.json                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway
‚îú‚îÄ‚îÄ RAILWAY_DEPLOY.md           # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
‚îî‚îÄ‚îÄ .gitignore                  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã Git
```

### –§—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –∫–æ–º–∞–Ω–¥ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —Å–º–µ—â–µ–Ω–∏–µ–º
- ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª @neighty_bs**
- ‚úÖ –í—ã–±–æ—Ä —Å–º–µ—â–µ–Ω–∏—è (5, 10, 20, 50, 100 –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä—è–º—ã—Ö –∫–æ–¥–æ–≤ (XWADUQNY) –∏ —Å—Å—ã–ª–æ–∫-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ PostgreSQL
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ /start
- ‚úÖ Health check endpoints –¥–ª—è Railway

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏

–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ–¥–ø–∏—Å–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –∫–∞–Ω–∞–ª `@neighty_bs`:

- ‚ùå –ï—Å–ª–∏ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º

**–ù–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞** - –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª.

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞ message_logs:**
- id (SERIAL PRIMARY KEY)
- user_id (BIGINT) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
- username (VARCHAR) - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- first_name (VARCHAR) - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- message_text (TEXT) - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- code_input (VARCHAR) - –í–≤–µ–¥–µ–Ω–Ω—ã–π –∫–æ–¥ –∫–æ–º–∞–Ω–¥—ã
- created_at (TIMESTAMP) - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏

## Language Support

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —è–∑—ã–∫–∞:

- üá∑üá∫ **–†—É—Å—Å–∫–∏–π** - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- üá¨üáß **English** - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

## User Flow

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start`
2. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ `@neighty_bs`
3. –ï—Å–ª–∏ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è"
4. –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω ‚Üí –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å —è–∑—ã–∫
5. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ ‚Üí –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º

## Deployment –Ω–∞ Railway

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∫–æ–¥–æ–º
2. Railway –∞–∫–∫–∞—É–Ω—Ç (railway.app)
3. Telegram –±–æ—Ç –æ—Ç @BotFather —Å —Ç–æ–∫–µ–Ω–æ–º
4. PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Railway)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ |
|------------|----------|-----------|
| TELEGRAM_BOT_TOKEN | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather | –î–∞ |
| DATABASE_URL | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL | –î–∞ |
| PORT | –ü–æ—Ä—Ç –¥–ª—è Flask —Å–µ—Ä–≤–µ—Ä–∞ | –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080) |

### –ö–∞–∫ –¥–µ–ø–ª–æ–∏—Ç—å

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –≤ GitHub
2. –ù–∞ railway.app —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –î–æ–±–∞–≤—å—Ç–µ PostgreSQL plugin
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ Variables
6. –î–µ–ø–ª–æ–π –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## Bot Commands

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É, –≤—ã–±—Ä–∞—Ç—å —è–∑—ã–∫
- `/generate` - –ù–∞—á–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–¥–æ–≤
- `/offset` - –ò–∑–º–µ–Ω–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é

## Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. `TELEGRAM_BOT_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ Railway Variables
2. –ë–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤ –∫–∞–Ω–∞–ª `@neighty_bs` (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏)
3. –õ–æ–≥–∏ –≤ Railway Dashboard –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ "Chat not found"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞–Ω–∞–ª `@neighty_bs` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `CHANNEL_USERNAME` –≤ bot.py

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL plugin –¥–æ–±–∞–≤–ª–µ–Ω –≤ Railway
2. DATABASE_URL –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ deploy

## Code Structure

- **–ü–æ–¥–ø–∏—Å–∫–∞:** `check_subscription()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–ª–µ–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–∞–Ω–∞–ª–µ
- **–Ø–∑—ã–∫–∏:** MESSAGES —Å–ª–æ–≤–∞—Ä—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π RU/EN
- **–ö–æ–¥—ã:** —Ñ—É–Ω–∫—Ü–∏–∏ `code_to_id()`, `id_to_code()` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:** ConversationHandler –¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤
